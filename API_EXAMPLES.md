# –ü—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö API

## üì∞ News API

### GET `/news` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –Ω–æ–≤–æ—Å—Ç–µ–π

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "id": 1,
    "created_at": "2025-12-13T16:00:00.000Z",
    "content": [
      {
        "id": 1,
        "lang": "ru",
        "title": "–ó–∞—Å–µ–¥–∞–Ω–∏–µ –ø–∞—Ä–ª–∞–º–µ–Ω—Ç–∞",
        "description": "–°–æ—Å—Ç–æ—è–ª–æ—Å—å –æ—á–µ—Ä–µ–¥–Ω–æ–µ –∑–∞—Å–µ–¥–∞–Ω–∏–µ –ø–∞—Ä–ª–∞–º–µ–Ω—Ç–∞...",
        "news": {
          "id": 1
        }
      },
      {
        "id": 2,
        "lang": "en",
        "title": "Parliament Session",
        "description": "Regular parliament session was held...",
        "news": {
          "id": 1
        }
      }
    ],
    "images": [
      {
        "file": {
          "id": "0d499adf-efd3-4e61-9799-69a41b6abff8",
          "link": "http://localhost:3000/0d499adf-efd3-4e61-9799-69a41b6abff8"
        }
      },
      {
        "file": {
          "id": "4395167b-c548-4f19-bba2-e4445d9bac39",
          "link": "http://localhost:3000/4395167b-c548-4f19-bba2-e4445d9bac39"
        }
      }
    ]
  },
  {
    "id": 2,
    "created_at": "2025-12-12T10:30:00.000Z",
    "content": [
      {
        "id": 3,
        "lang": "ru",
        "title": "–ù–æ–≤—ã–π –∑–∞–∫–æ–Ω–æ–ø—Ä–æ–µ–∫—Ç",
        "description": "–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π –∑–∞–∫–æ–Ω–æ–ø—Ä–æ–µ–∫—Ç –æ...",
        "news": {
          "id": 2
        }
      }
    ],
    "images": []
  }
]
```

### GET `/news/:id` - –û–¥–Ω–∞ –Ω–æ–≤–æ—Å—Ç—å

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": 1,
  "created_at": "2025-12-13T16:00:00.000Z",
  "content": [
    {
      "id": 1,
      "lang": "ru",
      "title": "–ó–∞—Å–µ–¥–∞–Ω–∏–µ –ø–∞—Ä–ª–∞–º–µ–Ω—Ç–∞",
      "description": "–°–æ—Å—Ç–æ—è–ª–æ—Å—å –æ—á–µ—Ä–µ–¥–Ω–æ–µ –∑–∞—Å–µ–¥–∞–Ω–∏–µ –ø–∞—Ä–ª–∞–º–µ–Ω—Ç–∞..."
    }
  ],
  "images": [
    {
      "file": {
        "id": "0d499adf-efd3-4e61-9799-69a41b6abff8",
        "link": "http://localhost:3000/0d499adf-efd3-4e61-9799-69a41b6abff8"
      }
    }
  ]
}
```

### POST `/news` - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ—Å—Ç—å

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "content": [
    {
      "lang": "ru",
      "title": "–ù–æ–≤–∞—è –Ω–æ–≤–æ—Å—Ç—å",
      "description": "–û–ø–∏—Å–∞–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏"
    }
  ]
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": 3,
  "created_at": "2025-12-13T16:30:00.000Z",
  "content": [
    {
      "id": 4,
      "lang": "ru",
      "title": "–ù–æ–≤–∞—è –Ω–æ–≤–æ—Å—Ç—å",
      "description": "–û–ø–∏—Å–∞–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏"
    }
  ],
  "images": []
}
```

### POST `/news/:id/media` - –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

**–ó–∞–ø—Ä–æ—Å:** `multipart/form-data` —Å —Ñ–∞–π–ª–∞–º–∏

**–û—Ç–≤–µ—Ç:**
```json
{
  "images": 2
}
```

---

## üë• Persons API

### GET `/persons` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–µ—Ä—Å–æ–Ω

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "id": 1,
    "full_name": "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á",
    "district": "–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π",
    "city": "–ö—ã–∑—ã–ª",
    "electoral_district": "1",
    "faction": "–ï–¥–∏–Ω–∞—è –†–æ—Å—Å–∏—è",
    "committee": "–ö–æ–º–∏—Ç–µ—Ç –ø–æ —ç–∫–æ–Ω–æ–º–∏–∫–µ",
    "description": "–î–µ–ø—É—Ç–∞—Ç –ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–π –î—É–º—ã",
    "education": "–í—ã—Å—à–µ–µ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–µ",
    "work_experience": "–ë–æ–ª–µ–µ 10 –ª–µ—Ç –≤ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–π —Å–ª—É–∂–±–µ",
    "email": "ivanov@example.com",
    "phone_number": "+7 (999) 123-45-67",
    "date_of_birth": "1975-05-15",
    "place_of_birth": "–ö—ã–∑—ã–ª",
    "start_date": "2020-01-01",
    "categories": [
      {
        "id": 1,
        "name": "–î–µ–ø—É—Ç–∞—Ç"
      },
      {
        "id": 2,
        "name": "–ß–ª–µ–Ω –∫–æ–º–∏—Ç–µ—Ç–∞"
      }
    ],
    "image": {
      "id": "62e1cb2e-ffbf-406b-a9d4-eba1a85fd443",
      "link": "http://localhost:3000/62e1cb2e-ffbf-406b-a9d4-eba1a85fd443"
    }
  },
  {
    "id": 2,
    "full_name": "–ü–µ—Ç—Ä–æ–≤–∞ –ú–∞—Ä–∏—è –°–µ—Ä–≥–µ–µ–≤–Ω–∞",
    "district": "–°–µ–≤–µ—Ä–Ω—ã–π",
    "city": "–ê–∫-–î–æ–≤—É—Ä–∞–∫",
    "electoral_district": "2",
    "faction": "–ö–ü–†–§",
    "committee": "–ö–æ–º–∏—Ç–µ—Ç –ø–æ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π –ø–æ–ª–∏—Ç–∏–∫–µ",
    "description": "–î–µ–ø—É—Ç–∞—Ç –ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–π –î—É–º—ã",
    "email": "petrova@example.com",
    "phone_number": "+7 (999) 234-56-78",
    "date_of_birth": "1980-08-20",
    "place_of_birth": "–ê–∫-–î–æ–≤—É—Ä–∞–∫",
    "start_date": "2020-01-01",
    "categories": [
      {
        "id": 1,
        "name": "–î–µ–ø—É—Ç–∞—Ç"
      }
    ],
    "image": null
  }
]
```

### GET `/persons/:id` - –û–¥–Ω–∞ –ø–µ—Ä—Å–æ–Ω–∞

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": 1,
  "full_name": "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á",
  "district": "–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π",
  "city": "–ö—ã–∑—ã–ª",
  "electoral_district": "1",
  "faction": "–ï–¥–∏–Ω–∞—è –†–æ—Å—Å–∏—è",
  "committee": "–ö–æ–º–∏—Ç–µ—Ç –ø–æ —ç–∫–æ–Ω–æ–º–∏–∫–µ",
  "description": "–î–µ–ø—É—Ç–∞—Ç –ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–π –î—É–º—ã",
  "education": "–í—ã—Å—à–µ–µ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–µ",
  "work_experience": "–ë–æ–ª–µ–µ 10 –ª–µ—Ç –≤ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–π —Å–ª—É–∂–±–µ",
  "email": "ivanov@example.com",
  "phone_number": "+7 (999) 123-45-67",
  "date_of_birth": "1975-05-15",
  "place_of_birth": "–ö—ã–∑—ã–ª",
  "start_date": "2020-01-01",
  "categories": [
    {
      "id": 1,
      "name": "–î–µ–ø—É—Ç–∞—Ç"
    }
  ],
  "image": {
    "id": "62e1cb2e-ffbf-406b-a9d4-eba1a85fd443",
    "link": "http://localhost:3000/62e1cb2e-ffbf-406b-a9d4-eba1a85fd443"
  }
}
```

### GET `/persons/faction/:faction` - –ü–µ—Ä—Å–æ–Ω—ã –ø–æ —Ñ—Ä–∞–∫—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä:** `GET /persons/faction/–ï–¥–∏–Ω–∞—è –†–æ—Å—Å–∏—è`

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "id": 1,
    "full_name": "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á",
    "faction": "–ï–¥–∏–Ω–∞—è –†–æ—Å—Å–∏—è",
    ...
  }
]
```

### POST `/persons` - –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä—Å–æ–Ω—É

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "fullName": "–°–∏–¥–æ—Ä–æ–≤ –ü–µ—Ç—Ä –í–∞—Å–∏–ª—å–µ–≤–∏—á",
  "district": "–Æ–∂–Ω—ã–π",
  "city": "–ß–∞–¥–∞–Ω",
  "electoralDistrict": "3",
  "faction": "–õ–î–ü–†",
  "committee": "–ö–æ–º–∏—Ç–µ—Ç –ø–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—é",
  "description": "–î–µ–ø—É—Ç–∞—Ç",
  "education": "–í—ã—Å—à–µ–µ –ø–µ–¥–∞–≥–æ–≥–∏—á–µ—Å–∫–æ–µ",
  "email": "sidorov@example.com",
  "phoneNumber": "+7 (999) 345-67-89",
  "dateOfBirth": "1985-03-10",
  "placeOfBirth": "–ß–∞–¥–∞–Ω",
  "startDate": "2020-01-01",
  "categoryIds": [1, 3]
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": 3,
  "full_name": "–°–∏–¥–æ—Ä–æ–≤ –ü–µ—Ç—Ä –í–∞—Å–∏–ª—å–µ–≤–∏—á",
  "district": "–Æ–∂–Ω—ã–π",
  "city": "–ß–∞–¥–∞–Ω",
  "electoral_district": "3",
  "faction": "–õ–î–ü–†",
  "committee": "–ö–æ–º–∏—Ç–µ—Ç –ø–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—é",
  "description": "–î–µ–ø—É—Ç–∞—Ç",
  "education": "–í—ã—Å—à–µ–µ –ø–µ–¥–∞–≥–æ–≥–∏—á–µ—Å–∫–æ–µ",
  "email": "sidorov@example.com",
  "phone_number": "+7 (999) 345-67-89",
  "date_of_birth": "1985-03-10",
  "place_of_birth": "–ß–∞–¥–∞–Ω",
  "start_date": "2020-01-01",
  "categories": [
    {
      "id": 1,
      "name": "–î–µ–ø—É—Ç–∞—Ç"
    },
    {
      "id": 3,
      "name": "–ß–ª–µ–Ω –∫–æ–º–∏—Ç–µ—Ç–∞"
    }
  ],
  "image": null
}
```

---

## üîê Auth API

### POST `/auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "email": "user@example.com",
  "password": "securePassword123",
  "firstName": "–ò–≤–∞–Ω",
  "lastName": "–ò–≤–∞–Ω–æ–≤"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "user": {
    "id": 1,
    "email": "user@example.com",
    "firstName": "–ò–≤–∞–Ω",
    "lastName": "–ò–≤–∞–Ω–æ–≤",
    "createdAt": "2025-12-13T16:00:00.000Z"
  },
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

### POST `/auth/login` - –í—Ö–æ–¥

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "email": "user@example.com",
  "password": "securePassword123"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "user": {
    "id": 1,
    "email": "user@example.com",
    "firstName": "–ò–≤–∞–Ω",
    "lastName": "–ò–≤–∞–Ω–æ–≤"
  },
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

### GET `/auth/profile` - –ü—Ä–æ—Ñ–∏–ª—å (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": 1,
  "email": "user@example.com",
  "firstName": "–ò–≤–∞–Ω",
  "lastName": "–ò–≤–∞–Ω–æ–≤",
  "createdAt": "2025-12-13T16:00:00.000Z"
}
```

---

## üìÅ Files API

### GET `/files/v2/:id` - –ü–æ–ª—É—á–∏—Ç—å —Ñ–∞–π–ª

**–ü—Ä–∏–º–µ—Ä:** `GET /files/v2/0d499adf-efd3-4e61-9799-69a41b6abff8`

**–û—Ç–≤–µ—Ç:** –ë–∏–Ω–∞—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–∞ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –¥–æ–∫—É–º–µ–Ω—Ç –∏ —Ç.–¥.)

---

## üîç –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–§–æ—Ä–º–∞—Ç –¥–∞—Ç:** –í—Å–µ –¥–∞—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO 8601 (UTC)
2. **Snake_case:** –ü–æ–ª—è –ë–î –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ snake_case —Ñ–æ—Ä–º–∞—Ç–µ
3. **CDN URLs:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `@AfterLoad()` –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã
4. **Relations:** –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ TypeORM `relations`
5. **–ü—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:** –ú–æ–≥—É—Ç –±—ã—Ç—å `null` –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –æ—Ç–≤–µ—Ç–µ
6. **–ú–∞—Å—Å–∏–≤—ã:** –í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∫–∞–∫ –º–∞—Å—Å–∏–≤—ã, –¥–∞–∂–µ –µ—Å–ª–∏ –ø—É—Å—Ç—ã–µ `[]`

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç:
```bash
./test-api.sh
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ curl:
```bash
# –ü–æ–ª—É—á–∏—Ç—å –Ω–æ–≤–æ—Å—Ç–∏
curl http://localhost:3000/news

# –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä—Å–æ–Ω
curl http://localhost:3000/persons

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ—Å—Ç—å
curl -X POST http://localhost:3000/news \
  -H "Content-Type: application/json" \
  -d '{"content":[{"lang":"ru","title":"–¢–µ—Å—Ç","description":"–û–ø–∏—Å–∞–Ω–∏–µ"}]}'
```

