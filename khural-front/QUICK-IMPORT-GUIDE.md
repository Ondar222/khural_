# Быстрая шпаргалка: Импорт депутатов

## Минимальный JSON для импорта

```json
[
  {
    "id": "dep-unique-id",
    "name": "Фамилия Имя Отчество",
    "photo": "https://khural.rtyva.ru/upload/iblock/abc/photo.jpg"
  }
]
```

## Рекомендуемый JSON (все основные поля)

```json
[
  {
    "id": "dep-unique-id",
    "name": "Фамилия Имя Отчество",
    "photo": "https://khural.rtyva.ru/upload/iblock/abc/photo.jpg",
    "position": "Депутат Верховного Хурала",
    "district": "Избирательный округ №5",
    "faction": "Единая Россия",
    "convocation": "VII",
    "biography": "Родился... Окончил... Работал...",
    "address": "г. Кызыл, ул. Ленина, д. 32, кабинет 206",
    "contacts": {
      "phone": "+7 (39422) 12-34-56",
      "email": "deputy@khural.org"
    },
    "committeeIds": ["agro", "econ"],
    "schedule": [
      { "day": "Понедельник", "time": "10:00 - 12:00" },
      { "day": "Среда", "time": "15:00 - 17:00" }
    ]
  }
]
```

## Полный JSON (со всеми данными)

```json
[
  {
    "id": "dep-unique-id",
    "name": "Фамилия Имя Отчество",
    "photo": "https://khural.rtyva.ru/upload/iblock/abc/photo.jpg",
    "position": "Депутат Верховного Хурала",
    "district": "Избирательный округ №5",
    "faction": "Единая Россия",
    "convocation": "VII",
    "biography": "<p>Полная биография с HTML...</p>",
    "address": "г. Кызыл, ул. Ленина, д. 32, кабинет 206",
    "contacts": {
      "phone": "+7 (39422) 12-34-56",
      "email": "deputy@khural.org"
    },
    "committeeIds": ["agro", "econ"],
    "laws": [
      {
        "id": "law-1",
        "title": "О внесении изменений...",
        "number": "№ 123-VII",
        "status": "Принят",
        "url": "https://khural.rtyva.ru/docs/law-123.pdf"
      }
    ],
    "incomeDocs": [
      {
        "year": 2024,
        "title": "Декларация за 2024 год",
        "size": "256 kB",
        "url": "https://khural.rtyva.ru/docs/income-2024.pdf"
      }
    ],
    "schedule": [
      { "day": "Понедельник", "time": "10:00 - 12:00" },
      { "day": "Среда", "time": "15:00 - 17:00" }
    ]
  }
]
```

## ID комитетов

Используйте эти ID для поля `committeeIds`:

- `"agro"` - Комитет по аграрной политике
- `"infra"` - Комитет по развитию инфраструктуры
- `"youth"` - Комитет по молодежной политике
- `"security"` - Комитет по безопасности
- `"health"` - Комитет по охране здоровья
- `"const"` - Комитет по конституционно-правовой политике
- `"econ"` - Комитет по экономической политике
- `"edu"` - Комитет по образованию

## Значения созывов

- `"I"` - Первый созыв (2010-2014)
- `"II"` - Второй созыв (2014-2019)
- `"III"` - Третий созыв (2019-2024)
- `"IV"` - Четвертый созыв (2024-н.в.)
- `"VII"` - Седьмой созыв (действующий)

## Часто задаваемые вопросы

### Q: Куда импортировать файл?
A: Админка → Депутаты → "Импортировать депутатов из JSON"

### Q: Что делать, если фото не отображается?
A: Проверьте:
1. URL должен начинаться с `https://` или `/upload/`
2. Файл должен существовать на сервере
3. Очистите localStorage: `localStorage.removeItem('khural_deputies_overrides_v1')`

### Q: Как добавить несколько созывов?
A: Используйте массив:
```json
"convocations": [
  {"name": "VII"},
  {"name": "VI"}
]
```

### Q: Можно ли не указывать контакты?
A: Да, но рекомендуется указать пустой объект:
```json
"contacts": {
  "phone": "",
  "email": ""
}
```

### Q: Как форматировать биографию?
A: Можно использовать HTML:
```json
"biography": "<p>Родился 1 января 1970 года.</p><p>Окончил университет в 1995 году.</p>"
```

### Q: Обязательно ли указывать законы и декларации?
A: Нет, эти поля опциональны. Можно добавить позже.

## Проверка после импорта

1. Откройте страницу депутатов: `/deputies`
2. Найдите импортированного депутата
3. Откройте его карточку
4. Проверьте:
   - ✅ Фото отображается
   - ✅ ФИО корректно
   - ✅ Должность видна
   - ✅ Контакты заполнены
   - ✅ Биография читается
   - ✅ Комитеты указаны (если добавляли)

## Пример команды для быстрой очистки кэша

Если после импорта данные не обновились, откройте консоль браузера (F12) и выполните:

```javascript
localStorage.removeItem('khural_deputies_overrides_v1');
location.reload();
```

## Пример конвертации из старого формата

Если у вас есть данные из `persons_info/deputaty_vseh_sozyvov.json`:

```javascript
// Старый формат
{
  "IE_ID": 123,
  "IE_NAME": "Иванов Иван Иванович",
  "IE_PREVIEW_PICTURE": "https://khural.rtyva.ru/upload/iblock/abc/photo.jpg",
  "IE_DETAIL_TEXT": "Биография...",
  "IP_PROP8": "+7 (39422) 12-34-56",
  "IP_PROP9": "ivanov@khural.org"
}

// Конвертируйте в новый формат:
{
  "id": "dep-123",
  "name": "Иванов Иван Иванович",
  "photo": "https://khural.rtyva.ru/upload/iblock/abc/photo.jpg",
  "biography": "Биография...",
  "contacts": {
    "phone": "+7 (39422) 12-34-56",
    "email": "ivanov@khural.org"
  }
}
```

Подробную спецификацию смотрите в `BACKEND-API-SPEC.md`
